<div class="booking-container">
  <div style="height: 70vh; width:100vw;" id="map"
        data-controller="mapbox"
        data-mapbox-markers-value="<%= @marker.to_json %>"
        data-mapbox-api-key-value="<%= ENV['MAPBOX_API_KEY'] %>">
  </div>
  <div class="booking-info" style="height: 30vh">
    <div class="booking-info-text">
     <p><%= @plug.location %></p>
     <p>Start-time: <%= @booking.created_at.strftime('%l:%M %p') %></p>
     <p>Cost: <%= @plug.fixed_cost_per_15_min %>$ per 15 minutes</p>
    </div>
    <div class="stop-button">
      <%= link_to "Stop Booking", bookings_stop_path(@plug, @booking), class:"stop-button-press" %>
    </div>
  </div>
</div>

<script>
const stop_button_booking = document.querySelector('.stop-button-press')
stop_button_booking.addEventListener("click", (event) => {
  <% @booking.duration = 0 %>
  <% @booking.save %>
})
</script>
